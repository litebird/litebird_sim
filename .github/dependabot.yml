version: 2
updates:
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "ci"
    # Group GitHub Actions updates into smaller logical groups so PRs are
    # easier to review. Adjust patterns to taste.
    groups:
      actions-security:
        patterns:
          - "dependabot/**"
      actions-all:
        patterns:
          - "*"

  # Also update Python dependencies declared in pyproject.toml / requirements files
  - package-ecosystem: pip
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "python"
    # Dependabot will attempt to update dependencies declared in pyproject.toml
    # or requirements files. For deterministic updates we recommend tracking
    # a lockfile (requirements.txt / uv.lock generated by `uv lock`).

    # Groups aligned with pyproject.toml
    groups:
      python-core:
        patterns:
          - "numpy"
          - "scipy"
          - "numba"
          - "astropy"
          - "pysm3"
          - "healpy"
      python-io-plot:
        patterns:
          - "matplotlib"
          - "h5py"
          - "pyyaml"
      python-mpi-perf:
        patterns:
          - "mpi4py"
          - "ducc0"
          - "libinsdb"
      python-docs-dev:
        patterns:
          - "sphinx"
          - "sphinxcontrib-*"
          - "pydata-sphinx-theme"
          - "pytest"
          - "pytest-cov"
          - "ruff"
          - "pre-commit"
      python-tools:
        patterns:
          - "requests"
          - "rich"
          - "jinja2"
          - "markdown*"
